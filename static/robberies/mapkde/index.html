<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<title>SF Walk Safety</title>
<meta name="description" content="A data-driven examination of pedestrian safety in San Francisco.">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/static/favicon.png" />
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/map.css">
<script src="/static/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    
</head>
<body>
    <!--[if lt IE 8]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">SF Walk Safety</a>
</div>
<div id="navbar" class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
        <li><a href="/highlights/">Highlights</a></li>
        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Thefts<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
                <li><a href="/thefts/">Main</a></li>
                <li class="divider"></li>
                <li><a href="/thefts/mapchoropleth/">Choropleth Maps</a></li>
                <li><a href="/thefts/mapmarkers/">Incidents Map</a></li>
                <li><a href="/thefts/mapkde/">Kernel Density Estimate</a></li>
                <li class="divider"></li>
                <li><a href="/thefts/#analysis">Analysis</a></li>
            </ul>
        </li>
        <li class="dropdown active"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Robberies<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
                <li><a href="/robberies/">Main</a></li>
                <li class="divider"></li>
                <li><a href="/robberies/mapchoropleth/">Choropleth Map</a></li>
                <li><a href="/robberies/mapmarkers/">Incidents Map</a></li>
                <li class="active"><a href="/robberies/mapkde/">Kernel Density Estimate</a></li>
                <li class="divider"></li>
                <li><a href="/robberies/#analysis">Analysis</a></li>
            </ul>
        </li>
        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Traffic Collisions<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
                <li><a href="/trafficcollisions/">Main</a></li>
                <li class="divider"></li>
                <li><a href="/trafficcollisions/mapchoropleth/">Choropleth Map</a></li>
                <li><a href="/trafficcollisions/mapmarkers/">Incidents Map</a></li>
                <li class="divider"></li>
                <li><a href="/trafficcollisions/#analysis">Analysis</a></li>
            </ul>
        </li>
        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">More<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
                <li><a href="/#aboutdata">About the Data</a></li>
                <li><a href="/#additionalresources">Additional Walking Resources</a></li>
                <li><a href="/#aboutproject">About the Project</a></li>
                <li><a href="/#aboutjay">About Jay</a></li>
            </ul>
        </li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/jayqi/sf-walk-safety" target='_blank'>View Source</a></li>
    </ul>
</div>
        </div>
    </nav>

    
    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron jumbotron-narrow">
        <div class="container">
            <h1>SF Walk Safety</h1>
            <p>A data-driven examination of pedestrian safety in San Francisco.</p>
        </div>
    </div>
    


    <div class="container">
        <!-- Content here -->
        
<!-- Example row of columns -->

<div class="row">
    <div class="col-md-12">
        <h2>Robberies &ndash; Kernel Density Estimate
            
        </h2>
    </div>
    <div class="col-md-12">
    <div class="mapbound">
            <div id='map'></div>
    </div>
    </div>
</div>
<br />





        <hr>
        <!-- Footer here -->
        <footer>
    <p>
        &copy; 2016 <a href="https://jayqi.com">Jay Qi</a>
        &nbsp;&nbsp;&bull;&nbsp;&nbsp;
        View Source on <a href="https://github.com/jayqi/sf-walk-safety">GitHub</a>
        &nbsp;&nbsp;&bull;&nbsp;&nbsp;
        Icon by <a href="http://www.flaticon.com/authors/scott-de-jonge" title="Scott de Jonge">Scott de Jonge</a>
        on <a href="http://www.flaticon.com" title="Flaticon">Flaticon</a>
        (<a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>)
        &nbsp;&nbsp;&bull;&nbsp;&nbsp;
        Design: <a href="https://bootswatch.com/sandstone/">Bootswatch Sandstone</a>
    </p>
</footer>
    </div> <!-- /container -->

    <!--
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/static/js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
    -->

    <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
    <script src="/static/js/vendor/bootstrap.min.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/smoothscroll.js"></script>
    
<!-- Mapbox.js and its stylesheet -->
<script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />

<!-- Geojson data -->


<!-- Machinery for creating map -->

    <script>L.mapbox.accessToken = 'pk.eyJ1IjoianlxaSIsImEiOiJjaW01ZG11MjcwMWl0dGttM2R2c2JvbThiIn0.eE6Xt0dMIl7Y2tOT8e6dyQ';
var map = L.mapbox.map('map', 'mapbox.light',{
    minZoom:12,
    maxZoom:18
})
    .setView([37.7680, -122.4367], 12);

map.scrollWheelZoom.disable();


// Load log kde tiles and add to map

    var kde_log = L.mapbox.tileLayer('jyqi.32dcovup').addTo(map);

kde_log.setOpacity(0.66)

// Load linear kde tiles

    var kde_lin = L.mapbox.tileLayer('jyqi.bcdd6b0w')

kde_lin.setOpacity(0.66)

// Layer control
var kdes = {
    "Log": kde_log,
    "Linear": kde_lin
};
L.control.layers(kdes).addTo(map);


// Define log legend
var legend_log = L.control({position: 'bottomright'});
legend_log.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'mapinfo maplegend');
    div.innerHTML += 'Log color scale:' + '<br>' +
            '<i style="background: #ffffcc"></i> 0.0' + '<br>' +
            '<i style="background: #ffeda0"></i> 0.001' + '<br>' +
            '<i style="background: #fed976"></i> 0.0027' + '<br>' +
            '<i style="background: #feb24c"></i> 0.0072' + '<br>' +
            '<i style="background: #fd8d3c"></i> 0.019' + '<br>' +
            '<i style="background: #fc4e2a"></i> 0.052' + '<br>' +
            '<i style="background: #e31a1c"></i> 0.14' + '<br>' +
            '<i style="background: #bd0026"></i> 0.37' + '<br>' +
            '<i style="background: #800026"></i> 1.0';
    return div;
};



// Define linear legend
var legend_lin = L.control({position: 'bottomright'});
legend_lin.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'mapinfo maplegend');
    div.innerHTML += 'Linear color scale:' + '<br>' +
            '<i style="background: #ffffcc"></i> 0.0' + '<br>' +
            '<i style="background: #ffeda0"></i> 0.125' + '<br>' +
            '<i style="background: #fed976"></i> 0.25' + '<br>' +
            '<i style="background: #feb24c"></i> 0.375' + '<br>' +
            '<i style="background: #fd8d3c"></i> 0.5' + '<br>' +
            '<i style="background: #fc4e2a"></i> 0.625' + '<br>' +
            '<i style="background: #e31a1c"></i> 0.75' + '<br>' +
            '<i style="background: #bd0026"></i> 0.875' + '<br>' +
            '<i style="background: #800026"></i> 1.0';
    return div;
};



// Add it to map because it's default
legend_log.addTo(map);


// Toggle legend when baselayer changes
map.on('baselayerchange', function (eventLayer) {
    // Switch to log legend
    if (eventLayer.name === 'Log') {
        this.removeControl(legend_lin);
        legend_log.addTo(this);
    } else { // Or switch to linear legend
        this.removeControl(legend_log);
        legend_lin.addTo(this);
    }
});</script>


<!-- Scripts for Bootstrap Datepicker -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.19/moment.min.js'></script>
<link href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.19/daterangepicker.min.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.19/daterangepicker.min.js'></script>
<link href='https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.11/jquery.timepicker.min.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.11/jquery.timepicker.min.js'></script>
<link href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.0.0/css/bootstrap-slider.min.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.0.0/bootstrap-slider.min.js'></script>
<script>// Date filter
$('#daterange').daterangepicker({
    "showDropdowns": true,
    "autoApply": true,
    "ranges": {
        "All Data (2003-2015)": [
            "2003-01-01",
            "2015-12-31"
        ],
        "Last Five Years (2011-2015)": [
            "2011-01-01",
            "2015-12-31"
        ],
        "Last Year (2015)": [
            "2015-01-01",
            "2015-12-31"
        ],
    },
    "linkedCalendars": false,
    "startDate": "01/01/2013",
    "endDate": "03/21/2016",
    "minDate": "01/01/2003",
    "maxDate": "03/21/2016"
}, function(start, end, label) {
  console.log("New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')");
});

// Time filter
$('#startTime').timepicker({
    'timeFormat' : 'H:i',
    'show2400' : true,
    'step' : 60
});
$('#endTime').timepicker({
    'timeFormat' : 'H:i',
    'show2400' : true,
    'step' : 60
});

// Temperature filters (sliders)
$("#hiTemp").slider({
    tooltip: 'always'
});
$("#loTemp").slider({
    tooltip: 'always'
});</script>





    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-XXXXX-X','auto');ga('send','pageview');
    </script>
    </body>
    </html>